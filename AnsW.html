<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Anscript Hub | Ultimate Dashboard</title>
    <style>
        :root { --p: #bdacff; --g: #00ffcc; --r: #ff4d4d; --bg: #050505; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        
        /* Hi·ªáu ·ª©ng l∆° l·ª≠ng */
        .bg-animate { position: absolute; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .circle { position: absolute; background: rgba(189, 172, 255, 0.05); border-radius: 50%; filter: blur(60px); animation: float 15s infinite; }
        @keyframes float { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(30px, -50px); } }

        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(20px); border: 1px solid rgba(189, 172, 255, 0.15); border-radius: 15px; }
        
        /* Layout ch√≠nh */
        #main-ui { display: grid; height: 100vh; grid-template-columns: 260px 1fr; }
        .sidebar { padding: 25px; border-right: 1px solid rgba(255, 255, 255, 0.05); display: flex; flex-direction: column; gap: 10px; }
        .nav-item { padding: 12px 18px; cursor: pointer; border-radius: 10px; transition: 0.3s; color: #aaa; display: flex; align-items: center; gap: 10px; }
        .nav-item:hover { background: rgba(189, 172, 255, 0.1); color: var(--p); }
        .nav-item.active { background: var(--p); color: black; font-weight: bold; }

        .content { padding: 40px; overflow-y: auto; position: relative; }
        .tab-content { display: none; animation: fadeIn 0.4s ease; }
        .tab-content.active { display: block; }

        /* Key Table Style */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; padding: 12px; border-bottom: 1px solid var(--p); color: var(--p); font-size: 12px; }
        td { padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 14px; }
        
        .btn-delete { background: none; border: 1px solid var(--r); color: var(--r); padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        .btn-delete:hover { background: var(--r); color: white; }

        .glass-input { background: rgba(0,0,0,0.3); border: 1px solid #444; color: white; padding: 10px; border-radius: 8px; width: 100%; margin-bottom: 15px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div class="bg-animate">
        <div class="circle" style="width: 400px; height: 400px; top: -10%; right: -5%;"></div>
        <div class="circle" style="width: 300px; height: 300px; bottom: -5%; left: 5%; animation-delay: 2s;"></div>
    </div>

    <div id="main-ui">
        <div class="sidebar glass">
            <div style="padding: 10px; margin-bottom: 20px;">
                <b style="color:var(--p); font-size: 22px; letter-spacing: 1px;">ANSRIPT</b>
                <div style="font-size: 10px; opacity: 0.5;">ADMIN CONSOLE V0.7</div>
            </div>
            <div class="nav-item active" onclick="switchTab('home', this)">üìä DASHBOARD</div>
            <div class="nav-item" onclick="switchTab('keys', this)">üîë QU·∫¢N L√ù KEY</div>
            <div class="nav-item" onclick="switchTab('api', this)">‚öôÔ∏è C·∫§U H√åNH API</div>
            <div class="nav-item" onclick="switchTab('scripts', this)">üìú SCRIPT HUB</div>
            
            <div style="margin-top: auto; font-size: 12px; padding: 10px;" id="server-status">
                Status: <span style="color:var(--g)">‚óè Online</span>
            </div>
        </div>

        <div class="content">
            
            <div id="tab-home" class="tab-content active">
                <h2 style="color:var(--p)">REAL-TIME PLAYER</h2>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                    <div class="glass" style="padding: 20px;"><span>M√ÅU</span><br><b id="st-hp" style="font-size: 24px;">0</b></div>
                    <div class="glass" style="padding: 20px;"><span>T·ªêC ƒê·ªò</span><br><b id="st-ws" style="font-size: 24px;">16</b></div>
                    <div class="glass" style="padding: 20px;"><span>NAME</span><br><b id="st-name" style="font-size: 24px;">N/A</b></div>
                </div>
                <div class="glass" style="margin-top: 20px; padding: 20px;">
                    <span>GAME HI·ªÜN T·∫†I</span><br><b id="st-game" style="color:var(--g)">ƒêang qu√©t game...</b>
                </div>
            </div>

            <div id="tab-keys" class="tab-content">
                <h2 style="color:var(--p)">KEY DATABASE (24H)</h2>
                <div class="glass" style="padding: 20px;">
                    <table>
                        <thead>
                            <tr>
                                <th>KEY CODE</th>
                                <th>NG√ÄY T·∫†O</th>
                                <th>H·∫æT H·∫†N TRONG</th>
                                <th>H√ÄNH ƒê·ªòNG</th>
                            </tr>
                        </thead>
                        <tbody id="key-table">
                            </tbody>
                    </table>
                </div>
            </div>

            <div id="tab-api" class="tab-content">
                <h2 style="color:var(--p)">LINKVERTISE SETTINGS</h2>
                <div class="glass" style="padding: 30px; max-width: 500px;">
                    <label>Linkvertise User ID</label>
                    <input type="text" id="cfg-id" class="glass-input" placeholder="V√≠ d·ª•: 123456">
                    <label>Th·ªùi gian Key (Gi·ªù)</label>
                    <input type="number" id="cfg-timer" class="glass-input" value="24">
                    <button class="nav-item active" style="border:none; width: 100%; justify-content: center;" onclick="saveConfig()">C·∫¨P NH·∫¨T C·∫§U H√åNH</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let ws = new WebSocket("wss://anshub-production.up.railway.app/");

        ws.onopen = () => ws.send(JSON.stringify({ type: "admin_get_keys" }));

        ws.onmessage = (e) => {
            const d = JSON.parse(e.data);

            // C·∫≠p nh·∫≠t Dashboard
            if (d.type === "ui_update") {
                document.getElementById('st-hp').innerText = Math.floor(d.data.hp);
                document.getElementById('st-ws').innerText = d.data.ws;
                document.getElementById('st-name').innerText = d.data.name;
                document.getElementById('st-game').innerText = d.data.game;
            }

            // C·∫≠p nh·∫≠t danh s√°ch Key
            if (d.type === "key_list") {
                const tbody = document.getElementById('key-table');
                tbody.innerHTML = "";
                for (let key in d.list) {
                    const info = d.list[key];
                    const timeLeft = Math.max(0, Math.floor((info.expires - Date.now()) / 1000 / 60)); // Ph√∫t
                    tbody.innerHTML += `
                        <tr>
                            <td><code>${key}</code></td>
                            <td>${new Date(info.created).toLocaleTimeString()}</td>
                            <td style="color:${timeLeft < 60 ? 'var(--r)' : 'var(--g)'}">${Math.floor(timeLeft/60)}h ${timeLeft%60}m</td>
                            <td><button class="btn-delete" onclick="deleteKey('${key}')">X√ìA</button></td>
                        </tr>
                    `;
                }
            }
        };

        function switchTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active');
            el.classList.add('active');
            if(tabId === 'keys') ws.send(JSON.stringify({ type: "admin_get_keys" }));
        }

        function deleteKey(key) {
            if(confirm("X√≥a key n√†y s·∫Ω khi·∫øn ng∆∞·ªùi ch∆°i b·ªã kick kh·ªèi script. Ch·∫Øc ch·∫Øn?")) {
                ws.send(JSON.stringify({ type: "admin_delete_key", key: key }));
            }
        }

        function saveConfig() {
            alert("ƒê√£ l∆∞u c·∫•u h√¨nh l√™n Server!");
            // G·ª≠i l·ªánh save config t·ªõi nodejs ·ªü ƒë√¢y
        }
    </script>
</body>
</html>
