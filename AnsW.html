<!DOCTYPE html>
<html>
<head>
    <title>Anscript Admin | Premium</title>
    <style>
        :root { --p: #bdacff; --g: #00ffcc; --r: #ff4d4d; --bg: #050505; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; }
        .sidebar { width: 250px; position: fixed; height: 100%; border-right: 1px solid rgba(189,172,255,0.2); padding: 20px; background: rgba(255,255,255,0.02); }
        .main-content { margin-left: 270px; padding: 30px; }
        .nav-btn { padding: 12px; margin: 5px 0; cursor: pointer; border-radius: 8px; transition: 0.3s; color: #888; }
        .nav-btn.active { background: var(--p); color: black; font-weight: bold; box-shadow: 0 0 15px var(--p); }
        .glass-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(189,172,255,0.1); padding: 20px; border-radius: 12px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; color: var(--p); padding: 10px; border-bottom: 1px solid #333; }
        td { padding: 10px; border-bottom: 1px solid #111; }
        .status-on { color: var(--g); text-shadow: 0 0 5px var(--g); }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2 style="color:var(--p)">ANSRIPT ADMIN</h2>
        <div class="nav-btn active" onclick="showTab('dash', this)">üìä DASHBOARD</div>
        <div class="nav-btn" onclick="showTab('keys', this)">üîë KEY SYSTEM</div>
        <div class="nav-btn" onclick="showTab('api', this)">‚öôÔ∏è C·∫§U H√åNH API</div>
        <div class="nav-btn" onclick="showTab('scripts', this)">üìú SCRIPTS HUB</div>
    </div>

    <div class="main-content">
        <div id="tab-keys" style="display:none">
            <h2 style="color:var(--p)">DANH S√ÅCH KEY ƒêANG HO·∫†T ƒê·ªòNG</h2>
            <div class="glass-card">
                <table>
                    <thead>
                        <tr>
                            <th>KEY</th>
                            <th>H·∫†N D√ôNG</th>
                            <th>TR·∫†NG TH√ÅI</th>
                            <th>H√ÄNH ƒê·ªòNG</th>
                        </tr>
                    </thead>
                    <tbody id="key-list-admin">
                        </tbody>
                </table>
            </div>
        </div>

        <div id="tab-api" style="display:none">
             <h2 style="color:var(--p)">C·∫§U H√åNH API</h2>
             <div class="glass-card">
                <input type="text" id="api-id" placeholder="User ID" class="glass-input" value="2650959">
                <input type="text" id="api-key" placeholder="API Key" class="glass-input" value="8e902ba7c0...ca0">
                <button onclick="saveConfig()">L∆ØU</button>
             </div>
        </div>
        
        </div>

    <script>
        let ws = new WebSocket("wss://anshub-production.up.railway.app/");
        
        function showTab(name, el) {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            // Logic ·∫©n hi·ªán c√°c div tab
            if(name === 'keys') loadKeyList();
        }

        function loadKeyList() {
            // G·ª≠i y√™u c·∫ßu qua WS ƒë·ªÉ l·∫•y danh s√°ch key t·ª´ server.js
            ws.send(JSON.stringify({type: "admin_get_keys"}));
        }

        ws.onmessage = (e) => {
            let d = JSON.parse(e.data);
            if(d.type === "key_list") {
                let html = "";
                for(let k in d.list) {
                    html += `<tr>
                        <td>${k}</td>
                        <td>24 Gi·ªù</td>
                        <td class="status-on">Online</td>
                        <td><button onclick="deleteKey('${k}')" style="color:red">X√ìA</button></td>
                    </tr>`;
                }
                document.getElementById('key-list-admin').innerHTML = html;
            }
        };

        function deleteKey(k) {
            ws.send(JSON.stringify({type: "admin_delete_key", key: k}));
        }
    </script>
</body>
</html>
