<!DOCTYPE html>
<html>
<head>
    <title>Anscript Hub v0.5 | Infinity Edition</title>
    <style>
        :root { --p: #bdacff; --bg: #050505; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; margin:0; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); border: 1px solid rgba(189,172,255,0.2); border-radius: 20px; }
        
        /* Màn hình chờ */
        #login-screen { position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        .user-card { 
            padding: 15px 30px; margin: 10px; cursor: pointer; transition: 0.3s; 
            border-left: 5px solid var(--p); width: 250px; text-align: center;
        }
        .user-card:hover { background: var(--p); color: black; transform: scale(1.1); }

        #main-ui { display: none; height: 100vh; grid-template-columns: 250px 1fr; }
        .sidebar { padding: 20px; border-right: 1px solid #222; }
        .content { padding: 40px; }
        .stat-box { padding: 20px; background: #111; border-radius: 10px; border-bottom: 2px solid var(--p); }
    </style>
</head>
<body>

    <div id="login-screen">
        <h1 style="color:var(--p); text-shadow: 0 0 20px var(--p);">ANSRIPT HUB</h1>
        <p>DANH SÁCH ĐANG ONLINE TRONG GAME:</p>
        <div id="user-list">
            <p style="opacity: 0.5;">Đang quét tìm người chơi...</p>
        </div>
        <p style="font-size: 10px; margin-top: 20px;">Hãy chạy Script trong Roblox trước khi kết nối!</p>
    </div>

    <div id="main-ui">
        <div class="sidebar glass">
            <h2>Anscript VN</h2>
            <p id="current-user" style="color:var(--p)"></p>
            <hr>
            <button onclick="location.reload()">THOÁT</button>
        </div>
        <div class="content">
            <div class="stat-box">
                <p>MÁU: <span id="hp">0</span></p>
                <p>TỐC ĐỘ: <span id="ws">0</span></p>
                <button onclick="exec('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source')">CHẠY INFINITE YIELD</button>
            </div>
        </div>
    </div>

    <script>
        let ws = new WebSocket("wss://anshub-production.up.railway.app/");
        
        ws.onmessage = (e) => {
            const d = JSON.parse(e.data);
            
            if(d.type === "online_list") {
                const listDiv = document.getElementById('user-list');
                listDiv.innerHTML = "";
                if(d.list.length === 0) listDiv.innerHTML = "Chưa có ai chạy script...";
                d.list.forEach(name => {
                    const card = document.createElement('div');
                    card.className = "glass user-card";
                    card.innerText = name;
                    card.onclick = () => {
                        ws.send(JSON.stringify({ type: "web_connect", playerName: name }));
                        card.innerText = "ĐANG CHỜ PHÊ DUYỆT...";
                    };
                    listDiv.appendChild(card);
                });
            }

            if(d.type === "connect_success") {
                document.getElementById('login-screen').style.display = "none";
                document.getElementById('main-ui').style.display = "grid";
            }

            if(d.type === "ui_update") {
                document.getElementById('hp').innerText = d.data.hp;
                document.getElementById('ws').innerText = d.data.ws;
            }
        };

        function exec(url) {
            ws.send(JSON.stringify({ type: "execute", code: `loadstring(game:HttpGet('${url}'))()` }));
        }
    </script>
</body>
</html>
e) return alert("An ơi, nhập tên nhân vật đã!");
            playerName = inputName;
            ws.send(JSON.stringify({ type: "web_connect", playerName: inputName }));
        }

        // Cập nhật dữ liệu lên UI
        function updateUI(data) {
            document.getElementById('stat-name').innerText = data.name || "N/A";
            document.getElementById('stat-hp').innerText = Math.floor(data.hp || 0) + "/100";
            document.getElementById('stat-ws').innerText = data.ws || 16;
            document.getElementById('stat-game').innerText = data.game || "Unknown Game";
        }

        // Chuyển Tab
        function switchTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.style.display = "none");
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById('tab-' + tabId).style.display = "block";
            el.classList.add('active');
        }

        // Gửi lệnh chạy Script
        function exec(name, url) {
            const code = `loadstring(game:HttpGet('${url}'))()`;
            ws.send(JSON.stringify({ type: "execute", code: code }));
            alert("Đã gửi lệnh chạy: " + name);
        }

        // Đăng xuất
        function logout() {
            localStorage.removeItem('ans_player_name');
            location.reload();
        }

        // Khởi động
        initConnection();
    </script>
</body>
</html>
