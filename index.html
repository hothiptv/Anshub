<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Anscript Control</title>
    <style>
        * { box-sizing: border-box; -webkit-user-select: none; }
        body { margin: 0; background: #000; overflow: hidden; height: 100vh; font-family: sans-serif; }
        
        /* Joystick Area */
        .joy-zone { position: absolute; width: 140px; height: 140px; background: rgba(255,255,255,0.1); border-radius: 50%; border: 2px solid #00ffcc; bottom: 50px; }
        #move-zone { left: 40px; }
        #cam-zone { right: 40px; }
        .stick { position: absolute; width: 60px; height: 60px; background: #00ffcc; border-radius: 50%; top: 40px; left: 40px; box-shadow: 0 0 15px #00ffcc; }

        /* Actions */
        .top-bar { position: absolute; top: 20px; width: 100%; display: flex; justify-content: center; gap: 10px; }
        .btn { padding: 10px 15px; background: #222; color: #00ffcc; border: 1px solid #00ffcc; border-radius: 5px; font-weight: bold; }
        .jump { position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%); width: 70px; height: 70px; border-radius: 50%; background: red; border: none; color: white; font-weight: bold; }
    </style>
</head>
<body>
    <div class="top-bar">
        <button class="btn" onclick="send('esc')">ESC</button>
        <button class="btn" onclick="send('tab')">TAB</button>
        <button class="btn" onclick="send('zoom_in')">ZOOM+</button>
        <button class="btn" onclick="send('zoom_out')">ZOOM-</button>
    </div>

    <div id="move-zone" class="joy-zone"><div id="move-stick" class="stick"></div></div>
    <div id="cam-zone" class="joy-zone"><div id="cam-stick" class="stick"></div></div>
    
    <button class="jump" onclick="send('jump')">JUMP</button>

    <script>
        const USER = "Tên_Roblox_Của_An"; // <--- THAY TÊN ACC VÀO ĐÂY
        function send(cmd, x=0, y=0) {
            fetch(`/api/send?user=${USER}&cmd=${cmd}&x=${x}&y=${y}`);
        }

        function setup(id, stickId, type) {
            const zone = document.getElementById(id);
            const stick = document.getElementById(stickId);
            zone.addEventListener('touchmove', (e) => {
                const rect = zone.getBoundingClientRect();
                let x = e.touches[0].clientX - rect.left - 70;
                let y = e.touches[0].clientY - rect.top - 70;
                stick.style.transform = `translate(${x}px, ${y}px)`;
                send(type, x, y);
            });
            zone.addEventListener('touchend', () => {
                stick.style.transform = `translate(0px, 0px)`;
                send(type, 0, 0);
            });
        }
        setup('move-zone', 'move-stick', 'move');
        setup('cam-zone', 'cam-stick', 'camera');
    </script>
</body>
</html>
